<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d6d6d; -webkit-text-stroke: #6d6d6d; background-color: #ecf1f7}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d6d6d; -webkit-text-stroke: #6d6d6d; background-color: #ecf1f7; min-height: 16.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="ja"&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;eBay利益計算アプリ&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Tailwind CSS CDNを読み込み --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Google Fonts 'Inter' を読み込み */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>body {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;body class="bg-gradient-to-br from-blue-500 to-purple-600 min-h-screen flex items-center justify-center p-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-md mx-auto text-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;h1 class="text-3xl font-bold text-gray-800 mb-6 rounded-lg"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>eBay利益計算アプリ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/h1&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 商品カテゴリ --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mb-5 text-left"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label for="productCategory" class="block text-gray-700 text-sm font-semibold mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>商品カテゴリ (任意)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;select id="productCategory"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>aria-label="商品カテゴリを選択"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;option value="none" selected disabled&gt;選択してください&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;option value="SLR"&gt;SLR&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;option value="point&amp;shoot"&gt;Point&amp;Shoot&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;option value="lens"&gt;Lens&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;option value="accessory"&gt;Accessory&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;option value="other"&gt;その他&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/select&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 商品名とeBay MINT値ボタン --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mb-5 text-left"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label for="productName" class="block text-gray-700 text-sm font-semibold mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>商品名 (任意)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="flex items-center space-x-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="productName" placeholder="例: Nikon F3 Body" value=""</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                       </span>class="flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                       </span>aria-label="商品名を入力"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="ebayReferenceButton"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 text-sm whitespace-nowrap"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>eBay参照</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 出品価格 ($) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mb-5 text-left"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label for="listingPriceUsd" class="block text-gray-700 text-sm font-semibold mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>出品価格 ($)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="number" id="listingPriceUsd" placeholder="例: 100.00" step="0.01" value=""</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                   </span>class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                   </span>aria-label="出品価格をドルで入力"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 為替レート (円/ドル) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mb-5 text-left"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label for="exchangeRateJpyUsd" class="block text-gray-700 text-sm font-semibold mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>為替レート (円/ドル)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="flex items-center space-x-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="number" id="exchangeRateJpyUsd" placeholder="例: 155.00" step="0.01"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                       </span>class="flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                       </span>aria-label="為替レートを入力"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="fetchRateButton"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 text-sm whitespace-nowrap"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>レート取得</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p id="loadingMessage" class="text-blue-500 text-sm mt-2 hidden"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>レートを取得中...</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p id="rateErrorMessage" class="text-red-500 mt-2 text-sm hidden"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>レートの取得に失敗しました。手動で入力してください。</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 仕入価格 (円) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mb-5 text-left"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label for="costPriceJpy" class="block text-gray-700 text-sm font-semibold mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>仕入価格 (円) &lt;span class="font-normal text-gray-500"&gt;(税込額を入力)&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="number" id="costPriceJpy" placeholder="例: 5000" step="1" value="0"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                   </span>class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                   </span>aria-label="仕入価格を日本円で入力"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 手数料 (%) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mb-5 text-left"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label for="commissionPercentage" class="block text-gray-700 text-sm font-semibold mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>手数料 (%)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="number" id="commissionPercentage" placeholder="例: 15" step="0.1" value="15"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                   </span>class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                   </span>aria-label="手数料をパーセンテージで入力"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 送料 (円) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mb-5 text-left"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label for="shippingCostJpy" class="block text-gray-700 text-sm font-semibold mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>送料 (円) &lt;span class="font-normal text-gray-500"&gt;(Free Shipping設定時など、出品者が負担する送料)&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="number" id="shippingCostJpy" placeholder="例: 1200" step="1" value=""</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                   </span>class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                   </span>aria-label="送料を日本円で入力"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- メモ欄 --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mb-6 text-left"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label for="memoText" class="block text-gray-700 text-sm font-semibold mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>メモ (任意)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;textarea id="memoText" placeholder="計算に関するメモをここに入力してください。" rows="3"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                      </span>aria-label="メモ入力欄"&gt;&lt;/textarea&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 計算ボタン --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;button id="calculateButton"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>計算</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/button&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 計算結果表示エリア --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mt-8 text-left"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h2 class="text-xl font-semibold text-gray-700 mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>計算結果</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- 商品カテゴリと商品名を結果欄に表示 --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="productInfoResult" class="bg-gray-100 p-4 rounded-lg mb-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-600 text-sm font-semibold mb-1"&gt;商品情報&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>class="text-lg font-bold text-gray-800 break-all min-h-[32px] flex flex-col items-start justify-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;span id="resultCategory"&gt;カテゴリ: ---&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;span id="resultName"&gt;商品名: ---&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="bg-gray-100 p-4 rounded-lg mb-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-600 text-sm font-semibold mb-1"&gt;想定利益&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="expectedProfitResult"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>class="text-3xl font-extrabold text-green-600 break-all min-h-[48px] flex items-center justify-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>--- 円</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="bg-gray-100 p-4 rounded-lg mb-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-600 text-sm font-semibold mb-1"&gt;利益率&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="profitMarginResult"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>class="text-3xl font-extrabold text-blue-600 break-all min-h-[48px] flex items-center justify-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>--- %</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="bg-gray-100 p-4 rounded-lg mb-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-600 text-sm font-semibold mb-1"&gt;損益分岐点&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="breakevenPointResult"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>class="text-3xl font-extrabold text-red-600 break-all min-h-[48px] flex items-center justify-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>--- ドル</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="bg-gray-100 p-4 rounded-lg"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-600 text-sm font-semibold mb-1"&gt;消費税還付金&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="consumptionTaxRefundResult"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>class="text-3xl font-extrabold text-purple-600 break-all min-h-[48px] flex items-center justify-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>--- 円</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p id="errorMessage" class="text-red-500 mt-4 text-sm hidden"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>有効な数値を入力してください。</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- シェアボタン --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mt-8 flex justify-center space-x-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="shareButtonLine"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>LINEでシェア</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="shareButtonEmail"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>メールでシェア</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 開発者情報 --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mt-12 text-center text-gray-500 text-sm"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p&gt;開発者: EKD&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// HTML要素への参照を取得</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const productCategorySelect = document.getElementById('productCategory');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const productNameInput = document.getElementById('productName');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const listingPriceUsdInput = document.getElementById('listingPriceUsd');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const exchangeRateJpyUsdInput = document.getElementById('exchangeRateJpyUsd');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const costPriceJpyInput = document.getElementById('costPriceJpy');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const commissionPercentageInput = document.getElementById('commissionPercentage');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const shippingCostJpyInput = document.getElementById('shippingCostJpy');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const memoTextInput = document.getElementById('memoText');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const calculateButton = document.getElementById('calculateButton');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const fetchRateButton = document.getElementById('fetchRateButton');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const ebayReferenceButton = document.getElementById('ebayReferenceButton');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const shareButtonLine = document.getElementById('shareButtonLine');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const shareButtonEmail = document.getElementById('shareButtonEmail');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const resultCategoryDiv = document.getElementById('resultCategory');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const resultNameDiv = document.getElementById('resultName');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const expectedProfitResultDiv = document.getElementById('expectedProfitResult');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const profitMarginResultDiv = document.getElementById('profitMarginResult');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const breakevenPointResultDiv = document.getElementById('breakevenPointResult');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const consumptionTaxRefundResultDiv = document.getElementById('consumptionTaxRefundResult');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const errorMessageDiv = document.getElementById('errorMessage');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const loadingMessageDiv = document.getElementById('loadingMessage');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const rateErrorMessageDiv = document.getElementById('rateErrorMessage');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// 計算結果を保持する変数</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let calculatedResults = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>expectedProfitJpy: 0,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>profitMargin: 0,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>breakevenPointUsd: 0,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>consumptionTaxRefundJpy: 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// 計算を実行する関数</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function performCalculation() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// エラーメッセージと結果をリセット</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>errorMessageDiv.classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>expectedProfitResultDiv.textContent = '--- 円';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>profitMarginResultDiv.textContent = '--- %';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>breakevenPointResultDiv.textContent = '--- ドル';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>consumptionTaxRefundResultDiv.textContent = '--- 円';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>resultCategoryDiv.textContent = 'カテゴリ: ---';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>resultNameDiv.textContent = '商品名: ---';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 入力値を取得し、数値に変換</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const listingPriceUsd = parseFloat(listingPriceUsdInput.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const exchangeRateJpyUsd = parseFloat(exchangeRateJpyUsdInput.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const costPriceJpy = parseFloat(costPriceJpyInput.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const commissionPercentage = parseFloat(commissionPercentageInput.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const shippingCostJpy = parseFloat(shippingCostJpyInput.value);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 商品カテゴリと商品名を結果欄に表示</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const selectedCategory = productCategorySelect.value !== 'none' ? productCategorySelect.options[productCategorySelect.selectedIndex].text : '未選択';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const inputProductName = productNameInput.value.trim() !== '' ? productNameInput.value.trim() : '未入力';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>resultCategoryDiv.textContent = `カテゴリ: ${selectedCategory}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>resultNameDiv.textContent = `商品名: ${inputProductName}`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 入力値のバリデーション</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (isNaN(listingPriceUsd) || listingPriceUsd &lt; 0 ||</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>isNaN(exchangeRateJpyUsd) || exchangeRateJpyUsd &lt;= 0 ||</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>isNaN(costPriceJpy) || costPriceJpy &lt; 0 ||</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>isNaN(commissionPercentage) || commissionPercentage &lt; 0 || commissionPercentage &gt; 100 ||</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>isNaN(shippingCostJpy) || shippingCostJpy &lt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>errorMessageDiv.textContent = '有効な数値を入力してください。';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>errorMessageDiv.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 計算式の定義</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 売上 (円) = 出品価格 ($) × 為替レート (円/ドル)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const revenueJpy = listingPriceUsd * exchangeRateJpyUsd;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 手数料 (ドル) = 出品価格 ($) × 手数料率 (%)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const commissionUsd = listingPriceUsd * (commissionPercentage / 100);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 手数料 (円) = 手数料 (ドル) × 為替レート (円/ドル)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const commissionJpy = commissionUsd * exchangeRateJpyUsd;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 消費税還付金 (円) = 仕入価格 (円) × 0.10 (10%で計算)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const consumptionTaxRefundJpy = costPriceJpy * 0.10;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 1. 想定利益 (JPY)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 想定利益 (円) = 売上 (円) - 手数料 (円) - 送料 (円) - 仕入価格 (円)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 注: 消費税還付金は別途表示し、想定利益には含めない</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const expectedProfitJpy = revenueJpy - commissionJpy - shippingCostJpy - costPriceJpy;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 2. 利益率 (%)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 利益率 (%) = (想定利益 (円) / 売上 (円)) × 100</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 売上が0の場合は計算不可</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const profitMargin = (revenueJpy !== 0) ? (expectedProfitJpy / revenueJpy) * 100 : 0;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 3. 損益分岐点 (USD)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 想定利益が0になる出品価格 ($)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// BEP_USD * exchangeRateJpyUsd - (BEP_USD * (commissionPercentage / 100)) * exchangeRateJpyUsd - shippingCostJpy - costPriceJpy = 0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// BEP_USD * exchangeRateJpyUsd * (1 - commissionPercentage / 100) = shippingCostJpy + costPriceJpy</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// BEP_USD = (shippingCostJpy + costPriceJpy) / (exchangeRateJpyUsd * (1 - commissionPercentage / 100))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let breakevenPointUsd;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const denominator = exchangeRateJpyUsd * (1 - commissionPercentage / 100);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (denominator &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>breakevenPointUsd = (costPriceJpy + shippingCostJpy) / denominator;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>breakevenPointUsd = Infinity; // もしくは適切なエラー表示</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 結果を更新</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>calculatedResults.expectedProfitJpy = expectedProfitJpy;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>calculatedResults.profitMargin = profitMargin;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>calculatedResults.breakevenPointUsd = breakevenPointUsd;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>calculatedResults.consumptionTaxRefundJpy = consumptionTaxRefundJpy; // 消費税還付金は計算はするが、想定利益には含めない</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 結果を表示</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>expectedProfitResultDiv.textContent = `${expectedProfitJpy.toLocaleString('ja-JP', { style: 'currency', currency: 'JPY' })}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>profitMarginResultDiv.textContent = `${profitMargin.toFixed(2)} %`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>breakevenPointResultDiv.textContent = `$ ${breakevenPointUsd.toFixed(2)}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>consumptionTaxRefundResultDiv.textContent = `${consumptionTaxRefundJpy.toLocaleString('ja-JP', { style: 'currency', currency: 'JPY' })}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// APIキー（このAPIは無料で利用可能ですが、有料プランなどで必要になる場合があります）</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const apiKey = ""; // Canvas環境では空文字列のままでOK</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// 為替レートを取得する関数</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>async function fetchExchangeRate() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>loadingMessageDiv.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>rateErrorMessageDiv.classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>fetchRateButton.disabled = true;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// ExchangeRate-APIのエンドポイントを使用</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// 無料プランではAPIキーが不要な場合もありますが、本番環境では取得を推奨</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const apiUrl = `https://v6.exchangerate-api.com/v6/${apiKey}/latest/USD`; // USDを基準に取得</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const response = await fetch(apiUrl);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const data = await response.json();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (data.result === 'success' &amp;&amp; data.conversion_rates &amp;&amp; data.conversion_rates.JPY) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const usdToJpyRate = data.conversion_rates.JPY;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>exchangeRateJpyUsdInput.value = usdToJpyRate.toFixed(2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>performCalculation(); // レート取得後に計算を実行</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>rateErrorMessageDiv.textContent = 'レートの取得に失敗しました。APIエラーまたはデータ形式が不正です。';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>rateErrorMessageDiv.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} catch (error) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>console.error('為替レートの取得中にエラーが発生しました:', error);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>rateErrorMessageDiv.textContent = 'レートの取得中にネットワークエラーが発生しました。';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>rateErrorMessageDiv.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} finally {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>loadingMessageDiv.classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>fetchRateButton.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// シェアメッセージを作成する関数</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function createShareMessage() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const category = productCategorySelect.value !== 'none' ? productCategorySelect.options[productCategorySelect.selectedIndex].text : '未選択';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const name = productNameInput.value.trim() !== '' ? productNameInput.value.trim() : '商品名なし';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const listingPrice = listingPriceUsdInput.value ? `$${parseFloat(listingPriceUsdInput.value).toFixed(2)}` : '未入力';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const rate = exchangeRateJpyUsdInput.value ? parseFloat(exchangeRateJpyUsdInput.value).toFixed(2) : '未入力';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const cost = costPriceJpyInput.value ? parseFloat(costPriceJpyInput.value).toLocaleString('ja-JP') : '未入力';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const commission = commissionPercentageInput.value ? parseFloat(commissionPercentageInput.value).toFixed(1) : '未入力';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const shipping = shippingCostJpyInput.value ? parseFloat(shippingCostJpyInput.value).toLocaleString('ja-JP') : '未入力';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const memo = memoTextInput.value.trim() !== '' ? `\nメモ: ${memoTextInput.value.trim()}\n` : '';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const profit = calculatedResults.expectedProfitJpy.toLocaleString('ja-JP', { style: 'currency', currency: 'JPY' });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const profitMargin = calculatedResults.profitMargin.toFixed(2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const breakeven = calculatedResults.breakevenPointUsd.toFixed(2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const refund = calculatedResults.consumptionTaxRefundJpy.toLocaleString('ja-JP', { style: 'currency', currency: 'JPY' });</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>return `【eBay利益計算結果】\n\nカテゴリ: ${category}\n商品名: ${name}\n\n出品価格: ${listingPrice}\n為替レート: ${rate} 円/ドル\n仕入価格: ${cost} 円\n手数料: ${commission} %\n送料: ${shipping} 円\n\n想定利益: ${profit}\n利益率: ${profitMargin} %\n損益分岐点: $${breakeven}\n消費税還付金: ${refund}${memo}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// LINEでシェア</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>shareButtonLine.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const message = createShareMessage();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const lineUrl = `https://line.me/R/msg/text/?${encodeURIComponent(message)}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>window.open(lineUrl, '_blank');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// メールでシェア</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>shareButtonEmail.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const subject = encodeURIComponent('eBay利益計算結果');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const body = encodeURIComponent(createShareMessage());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const mailtoUrl = `mailto:?subject=${subject}&amp;body=${body}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>window.open(mailtoUrl, '_blank');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// eBay参照ボタンのイベントリスナー</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>ebayReferenceButton.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const productName = productNameInput.value.trim();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (productName !== '') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// eBayの検索URLを構築</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// _nkw: 検索キーワード (商品名)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// LH_Complete=1: 落札相場 (Completed listings)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// LH_Sold=1: 落札相場 (Sold listings)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// _sop=3: 並び順 (Price + Shipping: highest first)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const encodedProductName = encodeURIComponent(productName);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const ebaySearchUrl = `https://www.ebay.com/sch/i.html?_nkw=${encodedProductName}&amp;LH_Complete=1&amp;LH_Sold=1&amp;_sop=3`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>window.open(ebaySearchUrl, '_blank');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>errorMessageDiv.textContent = '商品名を入力してください。';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>errorMessageDiv.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// 計算ボタンがクリックされた時の処理</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>calculateButton.addEventListener('click', performCalculation);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// レート取得ボタンがクリックされた時の処理</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>fetchRateButton.addEventListener('click', fetchExchangeRate);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// ページ読み込み時に一度レートを取得し、初期計算を実行</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>fetchRateButton.click(); // レート自動取得をトリガー</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 初期値を設定して計算を実行 (ユーザーの入力しやすいように)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>costPriceJpyInput.value = 5000; // 例: 5000円</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// 出品価格と送料はデフォルトで入力なし</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>performCalculation();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
